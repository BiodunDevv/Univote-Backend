{
  "info": {
    "name": "Univote - College & Department Management",
    "description": "Complete CRUD operations for colleges and departments in Univote",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{adminToken}}",
        "type": "string"
      }
    ]
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:5000/api",
      "type": "string"
    },
    {
      "key": "adminToken",
      "value": "",
      "type": "string"
    },
    {
      "key": "collegeId",
      "value": "",
      "type": "string"
    },
    {
      "key": "departmentId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "College Management",
      "item": [
        {
          "name": "Create College",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('collegeId', response.college._id);",
                  "    console.log('College ID saved:', response.college._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"College of Innovation and Technology\",\n  \"code\": \"COINTECH\",\n  \"description\": \"A modern college focused on innovation and emerging technologies\",\n  \"dean_name\": \"Prof. Innovation Leader\",\n  \"dean_email\": \"dean.innovation@bowenuniversity.edu.ng\",\n  \"departments\": [\n    {\n      \"name\": \"Artificial Intelligence\",\n      \"code\": \"AI\",\n      \"description\": \"Department of Artificial Intelligence and Machine Learning\",\n      \"hod_name\": \"Dr. AI Expert\",\n      \"hod_email\": \"ai.hod@bowenuniversity.edu.ng\",\n      \"available_levels\": [\"100\", \"200\", \"300\", \"400\"]\n    },\n    {\n      \"name\": \"Data Science\",\n      \"code\": \"DSC\",\n      \"description\": \"Department of Data Science and Analytics\",\n      \"available_levels\": [\"100\", \"200\", \"300\", \"400\"]\n    }\n  ]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/colleges",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges"]
            },
            "description": "Create a new college with optional departments. Super admin only."
          },
          "response": []
        },
        {
          "name": "Get All Colleges",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges?is_active=true&include_departments=true",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges"],
              "query": [
                {
                  "key": "is_active",
                  "value": "true",
                  "description": "Filter by active status"
                },
                {
                  "key": "include_departments",
                  "value": "true",
                  "description": "Include departments in response"
                }
              ]
            },
            "description": "Get all colleges with optional filters. Returns student counts."
          },
          "response": []
        },
        {
          "name": "Get College by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}"]
            },
            "description": "Get details of a specific college including all departments and student counts."
          },
          "response": []
        },
        {
          "name": "Update College",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated College Name\",\n  \"description\": \"Updated college description\",\n  \"dean_name\": \"Prof. New Dean\",\n  \"dean_email\": \"new.dean@bowenuniversity.edu.ng\",\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}"]
            },
            "description": "Update college details. All fields are optional. Super admin only."
          },
          "response": []
        },
        {
          "name": "Delete College (Soft)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}"]
            },
            "description": "Delete college. Fails if students exist unless force=true is used. Super admin only."
          },
          "response": []
        },
        {
          "name": "Delete College (Force)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}?force=true",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}"],
              "query": [
                {
                  "key": "force",
                  "value": "true",
                  "description": "Force delete even with students"
                }
              ]
            },
            "description": "Force delete college even if it has students. Super admin only."
          },
          "response": []
        }
      ],
      "description": "College CRUD operations"
    },
    {
      "name": "Department Management",
      "item": [
        {
          "name": "Add Department to College",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    pm.collectionVariables.set('departmentId', response.department._id);",
                  "    console.log('Department ID saved:', response.department._id);",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Blockchain Technology\",\n  \"code\": \"BCT\",\n  \"description\": \"Department of Blockchain and Distributed Systems\",\n  \"hod_name\": \"Dr. Blockchain Expert\",\n  \"hod_email\": \"blockchain.hod@bowenuniversity.edu.ng\",\n  \"available_levels\": [\"100\", \"200\", \"300\", \"400\"]\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}", "departments"]
            },
            "description": "Add a new department to an existing college. Super admin only."
          },
          "response": []
        },
        {
          "name": "Get All Departments in College",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "{{collegeId}}", "departments"]
            },
            "description": "Get all departments for a specific college with student counts."
          },
          "response": []
        },
        {
          "name": "Get Department by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments/{{departmentId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "admin",
                "colleges",
                "{{collegeId}}",
                "departments",
                "{{departmentId}}"
              ]
            },
            "description": "Get details of a specific department including student count."
          },
          "response": []
        },
        {
          "name": "Update Department",
          "request": {
            "method": "PATCH",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Updated Department Name\",\n  \"code\": \"UDN\",\n  \"description\": \"Updated department description\",\n  \"hod_name\": \"Dr. New HOD\",\n  \"hod_email\": \"new.hod@bowenuniversity.edu.ng\",\n  \"available_levels\": [\"100\", \"200\", \"300\", \"400\", \"500\"],\n  \"is_active\": true\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments/{{departmentId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "admin",
                "colleges",
                "{{collegeId}}",
                "departments",
                "{{departmentId}}"
              ]
            },
            "description": "Update department details. All fields are optional. Super admin only."
          },
          "response": []
        },
        {
          "name": "Delete Department (Soft)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments/{{departmentId}}",
              "host": ["{{baseUrl}}"],
              "path": [
                "admin",
                "colleges",
                "{{collegeId}}",
                "departments",
                "{{departmentId}}"
              ]
            },
            "description": "Delete department. Fails if students exist unless force=true is used. Super admin only."
          },
          "response": []
        },
        {
          "name": "Delete Department (Force)",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/{{collegeId}}/departments/{{departmentId}}?force=true",
              "host": ["{{baseUrl}}"],
              "path": [
                "admin",
                "colleges",
                "{{collegeId}}",
                "departments",
                "{{departmentId}}"
              ],
              "query": [
                {
                  "key": "force",
                  "value": "true",
                  "description": "Force delete even with students"
                }
              ]
            },
            "description": "Force delete department even if it has students. Super admin only."
          },
          "response": []
        }
      ],
      "description": "Department CRUD operations within colleges"
    },
    {
      "name": "Statistics & Search",
      "item": [
        {
          "name": "Get College Statistics",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/colleges/statistics",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "colleges", "statistics"]
            },
            "description": "Get comprehensive statistics for all colleges including department and student counts."
          },
          "response": []
        },
        {
          "name": "Search Departments",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/departments/search?query=computer",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "departments", "search"],
              "query": [
                {
                  "key": "query",
                  "value": "computer",
                  "description": "Search term (name or code)"
                },
                {
                  "key": "college_id",
                  "value": "",
                  "description": "Optional: Filter by specific college",
                  "disabled": true
                }
              ]
            },
            "description": "Search for departments across all colleges by name or code."
          },
          "response": []
        },
        {
          "name": "Search Departments by Code",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/admin/departments/search?query=CSC",
              "host": ["{{baseUrl}}"],
              "path": ["admin", "departments", "search"],
              "query": [
                {
                  "key": "query",
                  "value": "CSC",
                  "description": "Department code"
                }
              ]
            },
            "description": "Search for departments by department code."
          },
          "response": []
        }
      ],
      "description": "Statistics and search operations"
    }
  ]
}
